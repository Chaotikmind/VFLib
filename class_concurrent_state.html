<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>VFLib: ConcurrentState&lt; Object &gt; Class Template Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">VFLib
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">ConcurrentState&lt; Object &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__vf__concurrent.html">vf_concurrent</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Structured access to a shared state.  
 <a href="class_concurrent_state.html#details">More...</a></p>

<p><code>#include &quot;vf_ConcurrentState.h&quot;</code></p>

<p>Inherits Uncopyable.</p>

<p><a href="class_concurrent_state-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_concurrent_state_1_1_read_access.html">ReadAccess</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read only access to a <a class="el" href="class_concurrent_state.html" title="Structured access to a shared state.">ConcurrentState</a>.  <a href="class_concurrent_state_1_1_read_access.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_concurrent_state_1_1_unlocked_access.html">UnlockedAccess</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocked access to a <a class="el" href="class_concurrent_state.html" title="Structured access to a shared state.">ConcurrentState</a>.  <a href="class_concurrent_state_1_1_unlocked_access.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_concurrent_state_1_1_write_access.html">WriteAccess</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read/write access to a <a class="el" href="class_concurrent_state.html" title="Structured access to a shared state.">ConcurrentState</a>.  <a href="class_concurrent_state_1_1_write_access.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8211a66be1ab71888bfc9ac66c2421b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_concurrent_state.html#a8211a66be1ab71888bfc9ac66c2421b0">ConcurrentState</a> ()</td></tr>
<tr class="memdesc:a8211a66be1ab71888bfc9ac66c2421b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a concurrent state.  <a href="#a8211a66be1ab71888bfc9ac66c2421b0"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><h3>template&lt;class Object&gt;<br/>
class ConcurrentState&lt; Object &gt;</h3>

<p>This template wraps an object containing members representing state information shared between multiple threads of execution, where any thread may need to read or write as needed. Synchronized access to the concurrent state is enforced at compile time through strongly typed accessor classes. This interface design facilitates source code pattern matching to find all areas where a concurrent state is accessed.</p>
<p>There are three types of access:</p>
<ul>
<li><p class="startli"><a class="el" href="class_concurrent_state_1_1_read_access.html" title="Read only access to a ConcurrentState.">ReadAccess</a></p>
<p class="startli">Allows read access to the underlying object as const. <a class="el" href="class_concurrent_state_1_1_read_access.html" title="Read only access to a ConcurrentState.">ReadAccess</a> may be granted to one or more threads simultaneously. If one or more threads have <a class="el" href="class_concurrent_state_1_1_read_access.html" title="Read only access to a ConcurrentState.">ReadAccess</a>, requests to obtain <a class="el" href="class_concurrent_state_1_1_write_access.html" title="Read/write access to a ConcurrentState.">WriteAccess</a> are blocked.</p>
</li>
</ul>
<ul>
<li><p class="startli"><a class="el" href="class_concurrent_state_1_1_write_access.html" title="Read/write access to a ConcurrentState.">WriteAccess</a></p>
<p class="startli">Allows exclusive read/write access the underlying object. A <a class="el" href="class_concurrent_state_1_1_write_access.html" title="Read/write access to a ConcurrentState.">WriteAccess</a> request blocks until all existing <a class="el" href="class_concurrent_state_1_1_read_access.html" title="Read only access to a ConcurrentState.">ReadAccess</a> and <a class="el" href="class_concurrent_state_1_1_write_access.html" title="Read/write access to a ConcurrentState.">WriteAccess</a> requests are released. While a <a class="el" href="class_concurrent_state_1_1_write_access.html" title="Read/write access to a ConcurrentState.">WriteAccess</a> exists, requests for <a class="el" href="class_concurrent_state_1_1_read_access.html" title="Read only access to a ConcurrentState.">ReadAccess</a> will block.</p>
</li>
</ul>
<ul>
<li><p class="startli"><a class="el" href="class_concurrent_state_1_1_unlocked_access.html" title="Unlocked access to a ConcurrentState.">UnlockedAccess</a></p>
<p class="startli">Allows read access to the underlying object without using the lock. This can be helpful when designing concurrent structures through composition. It also makes it easier to search for places in code which use unlocked access.</p>
</li>
</ul>
<div class="fragment"><pre class="fragment">    <span class="keyword">struct </span>SharedData
    {
      <span class="keywordtype">int</span> value1;
      <a class="codeRef" doxygen="juce.tag:http://www.rawmaterialsoftware.com/juce/api//" href="http://www.rawmaterialsoftware.com/juce/api/classString.html">String</a> value2;
    };

    <span class="keyword">typedef</span> <a class="code" href="class_concurrent_state.html" title="Structured access to a shared state.">ConcurrentState &lt;SharedData&gt;</a> SharedState;

    SharedState sharedState;

    <span class="keywordtype">void</span> readExample ()
    {
      SharedState::ReadAccess state (sharedState);

      print (state-&gt;value1);   <span class="comment">// read access</span>
      print (state-&gt;value2);   <span class="comment">// read access</span>

      state-&gt;value1 = 42;      <span class="comment">// write disallowed: compile error</span>
    }

    <span class="keywordtype">void</span> writeExample ()
    {
      SharedState::WriteAccess state (sharedState);

      state-&gt;value2 = <span class="stringliteral">&quot;Label&quot;</span>; <span class="comment">// write access</span>
    }
</pre></div><p>Forwarding constructors with up to eight parameters are provided. This lets you write constructors into the underlying data object. For example:</p>
<div class="fragment"><pre class="fragment">    <span class="keyword">struct </span>SharedData
    {
      <span class="keyword">explicit</span> SharedData (<span class="keywordtype">int</span> numSlots)
      {
        m_array.reserve (numSlots);
      }

      std::vector &lt;AudioSampleBuffer*&gt; m_array;
    };

    <span class="comment">// Construct SharedData with one parameter</span>
    <a class="code" href="class_concurrent_state.html" title="Structured access to a shared state.">ConcurrentState &lt;SharedData&gt;</a> sharedState (16);
</pre></div><dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">Object</td><td>The type of object to encapsulate.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning:</dt><dd>Recursive calls are not supported. It is generally not possible for a thread of execution to acquire write access while it already has read access. Such an attempt will result in undefined behavior. Calling into unknown code while holding a lock can cause deadlock. See <a class="el" href="class_call_queue.html#a7b7121a53b44c35b82358544a6a7cea0">CallQueue::queue()</a>. </dd></dl>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8211a66be1ab71888bfc9ac66c2421b0"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Object&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_concurrent_state.html">ConcurrentState</a>&lt; Object &gt;::<a class="el" href="class_concurrent_state.html">ConcurrentState</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Up to 8 parameters can be specified in the constructor. These parameters are forwarded to the corresponding constructor in Object. If no constructor in Object matches the parameter list, a compile error is generated. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>vf_ConcurrentState.h</li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 25 2012 21:48:56 for VFLib by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
