<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>VFLib: AudioBufferPool Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">VFLib
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">AudioBufferPool Class Reference<div class="ingroups"><a class="el" href="group__vf__audio.html">vf_audio</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A pool of audio buffers for temporary calculations.  
 <a href="class_audio_buffer_pool.html#details">More...</a></p>

<p><code>#include &quot;vf_AudioBufferPool.h&quot;</code></p>

<p>Inherited by <a class="el" href="class_audio_buffer_pool_type.html">AudioBufferPoolType&lt; TypeOfCriticalSectionToUse &gt;</a>.</p>

<p><a href="class_audio_buffer_pool-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_buffer_pool_1_1_buffer.html">Buffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size tracking for <a class="elRef" doxygen="juce.tag:http://www.rawmaterialsoftware.com/juce/api//" href="http://www.rawmaterialsoftware.com/juce/api/classAudioSampleBuffer.html">AudioSampleBuffer</a>.  <a href="class_audio_buffer_pool_1_1_buffer.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad88ca8fb2127105e6c3a95bff0764923"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_buffer_pool.html#ad88ca8fb2127105e6c3a95bff0764923">~AudioBufferPool</a> ()</td></tr>
<tr class="memitem:a163465dc6ccf9e1544617ab9f74aa43e"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_audio_buffer_pool_1_1_buffer.html">Buffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_buffer_pool.html#a163465dc6ccf9e1544617ab9f74aa43e">requestBuffer</a> (int numChannels, int numSamples)=0</td></tr>
<tr class="memdesc:a163465dc6ccf9e1544617ab9f74aa43e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request a temporary buffer.  <a href="#a163465dc6ccf9e1544617ab9f74aa43e"></a><br/></td></tr>
<tr class="memitem:aedbd43cea9d2a42cb212467eda701a01"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_buffer_pool.html#aedbd43cea9d2a42cb212467eda701a01">releaseBuffer</a> (<a class="el" href="class_audio_buffer_pool_1_1_buffer.html">Buffer</a> *buffer)=0</td></tr>
<tr class="memdesc:aedbd43cea9d2a42cb212467eda701a01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases a previously requested buffer back into the pool.  <a href="#aedbd43cea9d2a42cb212467eda701a01"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This container provides a pool of audio buffers that grow to match the working set requirements based on actual usage. Since the buffers never shrink or get deleted, there are almost no calls to the system to allocate or free memory.</p>
<p>This is ideal for <a class="elRef" doxygen="juce.tag:http://www.rawmaterialsoftware.com/juce/api//" href="http://www.rawmaterialsoftware.com/juce/api/classAudioIODeviceCallback.html">AudioIODeviceCallback</a> implementations which process audio buffers and require temporary storage for intermediate calculations. The usage style is to request a temporary buffer of the desired size, perform calculations, and then release the buffer when finished.</p>
<p>Buffers are intelligently resized and recycled to consume the smallest amount of memory possible based on the usage pattern, with no effort required by the programmer.</p>
<p>To use the container, create an instance of the <a class="el" href="class_audio_buffer_pool_type.html" title="Template for AudioBufferPool with a specified lock type.">AudioBufferPoolType</a> template, and specify the type of lock to use for synchronization. By default, a <a class="elRef" doxygen="juce.tag:http://www.rawmaterialsoftware.com/juce/api//" href="http://www.rawmaterialsoftware.com/juce/api/classCriticalSection.html">CriticalSection</a> is used but if you aren't sharing the pool between threads, you can use a <a class="elRef" doxygen="juce.tag:http://www.rawmaterialsoftware.com/juce/api//" href="http://www.rawmaterialsoftware.com/juce/api/classDummyCriticalSection.html">DummyCriticalSection</a> instead.</p>
<p>Here's an example:</p>
<div class="fragment"><pre class="fragment">    <a class="code" href="class_audio_buffer_pool_type.html" title="Template for AudioBufferPool with a specified lock type.">AudioBufferPoolType &lt;DummyCriticalSection&gt;</a> pool;

    <span class="comment">// Request a stereo buffer with room for 1024 samples.</span>
    <a class="code" href="class_audio_buffer_pool_1_1_buffer.html" title="Size tracking for AudioSampleBuffer.">AudioBufferPool::Buffer</a>* buffer = pool.<a class="code" href="class_audio_buffer_pool_type.html#a71b4169d98676c573e4ef615d4c9d626">requestBuffer</a> (2, 1024);

    <span class="comment">// (Process buffer)</span>

    <span class="comment">// Release the buffer to be re-used later.</span>
    pool.<a class="code" href="class_audio_buffer_pool_type.html#a93183ea809aa45d97880de2282231de4">releaseBuffer</a> (buffer);
</pre></div><p>Since <a class="el" href="class_audio_buffer_pool_1_1_buffer.html" title="Size tracking for AudioSampleBuffer.">Buffer</a> is derived from <a class="elRef" doxygen="juce.tag:http://www.rawmaterialsoftware.com/juce/api//" href="http://www.rawmaterialsoftware.com/juce/api/classAudioSampleBuffer.html">AudioSampleBuffer</a>, it can be used anywhere an <a class="elRef" doxygen="juce.tag:http://www.rawmaterialsoftware.com/juce/api//" href="http://www.rawmaterialsoftware.com/juce/api/classAudioSampleBuffer.html">AudioSampleBuffer</a> is expected. This example requests a temporary buffer and stores it in an <a class="elRef" doxygen="juce.tag:http://www.rawmaterialsoftware.com/juce/api//" href="http://www.rawmaterialsoftware.com/juce/api/structAudioSourceChannelInfo.html">AudioSourceChannelInfo</a>:</p>
<div class="fragment"><pre class="fragment">    <span class="comment">// Request a stereo buffer with room for 1024 samples.</span>
    <a class="code" href="class_audio_buffer_pool_1_1_buffer.html" title="Size tracking for AudioSampleBuffer.">AudioBufferPool::Buffer</a>* buffer = pool.<a class="code" href="class_audio_buffer_pool_type.html#a71b4169d98676c573e4ef615d4c9d626">requestBuffer</a> (2, 1024);

    <span class="comment">// Fill out the AudioSourceChannelInfo structure with the buffer</span>
    <a class="codeRef" doxygen="juce.tag:http://www.rawmaterialsoftware.com/juce/api//" href="http://www.rawmaterialsoftware.com/juce/api/structAudioSourceChannelInfo.html">AudioSourceChannelInfo</a> info;
    info.<a class="codeRef" doxygen="juce.tag:http://www.rawmaterialsoftware.com/juce/api//" href="http://www.rawmaterialsoftware.com/juce/api/structAudioSourceChannelInfo.html#abed0807b4447de67b8ffd29ef2f2d2d1">buffer</a> = buffer;         <span class="comment">// allowed, since AudioBufferPool::Buffer *</span>
                                  <span class="comment">// is-a AudioSampleBuffer *</span>
    info.<a class="codeRef" doxygen="juce.tag:http://www.rawmaterialsoftware.com/juce/api//" href="http://www.rawmaterialsoftware.com/juce/api/structAudioSourceChannelInfo.html#a42e88ccc05d4893015e2415785390259">startSample</a> = 0;
    info.<a class="codeRef" doxygen="juce.tag:http://www.rawmaterialsoftware.com/juce/api//" href="http://www.rawmaterialsoftware.com/juce/api/structAudioSourceChannelInfo.html#a6669c809cf3b47afa94af63d4fa48101">numSamples</a> = 1024;

    <span class="comment">// Clear out the range of samples</span>
    info.<a class="codeRef" doxygen="juce.tag:http://www.rawmaterialsoftware.com/juce/api//" href="http://www.rawmaterialsoftware.com/juce/api/structAudioSourceChannelInfo.html#a988b6665c085bf47b1b5fd4f1e6b7f8b">clearActiveBufferRegion</a> ();
</pre></div><dl class="section see"><dt>See also:</dt><dd><a class="el" href="class_audio_buffer_pool_type.html" title="Template for AudioBufferPool with a specified lock type.">AudioBufferPoolType</a>, <a class="el" href="class_scoped_audio_sample_buffer.html" title="A temporary audio buffer with scoped lifetime.">ScopedAudioSampleBuffer</a> </dd></dl>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad88ca8fb2127105e6c3a95bff0764923"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_audio_buffer_pool.html#ad88ca8fb2127105e6c3a95bff0764923">AudioBufferPool::~AudioBufferPool</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>All allocated buffers are freed. Any previously requested buffers must already be released. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a163465dc6ccf9e1544617ab9f74aa43e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="class_audio_buffer_pool_1_1_buffer.html">Buffer</a>* <a class="el" href="class_audio_buffer_pool.html#a163465dc6ccf9e1544617ab9f74aa43e">AudioBufferPool::requestBuffer</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numChannels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numSamples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The pool returns a buffer with the specified number of channels and enough room for at least numSamples. The caller owns the buffer until it is released with a matching call to <a class="el" href="class_audio_buffer_pool.html#aedbd43cea9d2a42cb212467eda701a01" title="Releases a previously requested buffer back into the pool.">releaseBuffer()</a>.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">numChannels</td><td>The number of channels requested.</td></tr>
    <tr><td class="paramname">numSamples</td><td>The number of samples per channel requested.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>The resulting buffer. </dd></dl>

<p>Implemented in <a class="el" href="class_audio_buffer_pool_type.html#a71b4169d98676c573e4ef615d4c9d626">AudioBufferPoolType&lt; TypeOfCriticalSectionToUse &gt;</a>.</p>

</div>
</div>
<a class="anchor" id="aedbd43cea9d2a42cb212467eda701a01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="class_audio_buffer_pool.html#aedbd43cea9d2a42cb212467eda701a01">AudioBufferPool::releaseBuffer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_audio_buffer_pool_1_1_buffer.html">Buffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The buffer to release. This must have been provided by an earlier call to <a class="el" href="class_audio_buffer_pool.html#a163465dc6ccf9e1544617ab9f74aa43e" title="Request a temporary buffer.">requestBuffer()</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="class_audio_buffer_pool_type.html#a93183ea809aa45d97880de2282231de4">AudioBufferPoolType&lt; TypeOfCriticalSectionToUse &gt;</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>vf_AudioBufferPool.h</li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 11 2012 12:40:40 for VFLib by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
