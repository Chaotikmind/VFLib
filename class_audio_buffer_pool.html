<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>VFLib: AudioBufferPool Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">VFLib
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">AudioBufferPool Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A pool of reusable AudioSampleBuffer.  
 <a href="class_audio_buffer_pool.html#details">More...</a></p>

<p><a href="class_audio_buffer_pool-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abb24b39a063a623cc148dc96a8680c8c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_buffer_pool.html#abb24b39a063a623cc148dc96a8680c8c">AudioBufferPool</a> ()</td></tr>
<tr class="memdesc:abb24b39a063a623cc148dc96a8680c8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new, empty pool.  <a href="#abb24b39a063a623cc148dc96a8680c8c"></a><br/></td></tr>
<tr class="memitem:ad88ca8fb2127105e6c3a95bff0764923"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_buffer_pool.html#ad88ca8fb2127105e6c3a95bff0764923">~AudioBufferPool</a> ()</td></tr>
<tr class="memdesc:ad88ca8fb2127105e6c3a95bff0764923"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a pool.  <a href="#ad88ca8fb2127105e6c3a95bff0764923"></a><br/></td></tr>
<tr class="memitem:a843f8d053a1ca4230a8be28dbe185490"><td class="memItemLeft" align="right" valign="top">virtual Buffer *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_buffer_pool.html#a843f8d053a1ca4230a8be28dbe185490">acquireBuffer</a> (int numChannels, int numSamples)=0</td></tr>
<tr class="memdesc:a843f8d053a1ca4230a8be28dbe185490"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request a temporary buffer.  <a href="#a843f8d053a1ca4230a8be28dbe185490"></a><br/></td></tr>
<tr class="memitem:aedbd43cea9d2a42cb212467eda701a01"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_buffer_pool.html#aedbd43cea9d2a42cb212467eda701a01">releaseBuffer</a> (Buffer *buffer)=0</td></tr>
<tr class="memdesc:aedbd43cea9d2a42cb212467eda701a01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases a previously requested buffer back into the pool.  <a href="#aedbd43cea9d2a42cb212467eda701a01"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aab3f3fe00359088672682a492eddd37e"><td class="memItemLeft" align="right" valign="top">Buffer *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_buffer_pool.html#aab3f3fe00359088672682a492eddd37e">acquireBufferInternal</a> (int numChannels, int numSamples)</td></tr>
<tr class="memitem:ade6245a8135f5fe419e705231b6cb827"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_audio_buffer_pool.html#ade6245a8135f5fe419e705231b6cb827">releaseBufferInternal</a> (Buffer *buffer)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A pool of reusable AudioSampleBuffer. </p>
<p>This is useful when you need to allocate temporary buffers in your audioDeviceIOCallback routines, but don't want to incur the penalty of allocating and freeing every time. This class intelligently recycles buffers to match your needs. It is easy to use:</p>
<div class="fragment"><pre class="fragment">    AudioBufferPoolType &lt;DummyCriticalSection&gt; pool;

    <span class="keywordtype">void</span> audioDeviceIOCallback (<span class="keyword">const</span> <span class="keywordtype">float</span>** inputChannelData,
                  <span class="keywordtype">int</span> numInputChannels,
                  <span class="keywordtype">float</span>** outputChannelData,
                  <span class="keywordtype">int</span> numOutputChannels,
                  <span class="keywordtype">int</span> numSamples)
    {
      <span class="comment">// Request a stereo buffer with room for 1024 samples.</span>
      AudioBufferPool::Buffer* buffer = pool.requestBuffer (2, 1024);

      <span class="comment">// (Process buffer)</span>

      <span class="comment">// Release the buffer to be re-used later.</span>
      pool.releaseBuffer (buffer);
    }
</pre></div><p>Since Buffer is derived from AudioSampleBuffer, it can be used anywhere an AudioSampleBuffer is expected. This example requests a temporary buffer and stores it in an AudioSourceChannelInfo:</p>
<div class="fragment"><pre class="fragment">    {
      <span class="comment">// Request a stereo buffer with room for 1024 samples.</span>
      AudioBufferPool::Buffer* buffer = pool.requestBuffer (2, 1024);

      AudioSourceChannelInfo info;
      info.buffer = buffer;         <span class="comment">// allowed, since AudioBufferPool::Buffer *</span>
                                    <span class="comment">// is-a AudioSampleBuffer *</span>
      info.startSample = 0;
      info.numSamples = 1024;
      info.clearActiveBufferRegion ();

    }
</pre></div><dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">LockType</td><td>The type of lock to use. To share the pool between threads a CriticalSection is needed. To use the pool without any locking, a DummyCriticalSection may be used. </td></tr>
  </table>
  </dd>
</dl>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="abb24b39a063a623cc148dc96a8680c8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_audio_buffer_pool.html#abb24b39a063a623cc148dc96a8680c8c">AudioBufferPool::AudioBufferPool</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a new, empty pool. </p>
<p>The pool starts with enough slots for 10 buffers. More slots are automatically allocated if needed. </p>

</div>
</div>
<a class="anchor" id="ad88ca8fb2127105e6c3a95bff0764923"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_audio_buffer_pool.html#ad88ca8fb2127105e6c3a95bff0764923">AudioBufferPool::~AudioBufferPool</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destroy a pool. </p>
<p>All allocated buffers are freed. Any previously requested buffers must already be released. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a843f8d053a1ca4230a8be28dbe185490"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual Buffer* <a class="el" href="class_audio_buffer_pool.html#a843f8d053a1ca4230a8be28dbe185490">AudioBufferPool::acquireBuffer</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numChannels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numSamples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Request a temporary buffer. </p>
<p>A buffer is returned from the pool with the specified number of channels and enough room for at least numSamples. The buffer is taken out of the pool, until it is released with a matching call to <a class="el" href="class_audio_buffer_pool.html#aedbd43cea9d2a42cb212467eda701a01" title="Releases a previously requested buffer back into the pool.">releaseBuffer()</a>.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">numChannels</td><td>The number of channels requested. </td></tr>
    <tr><td class="paramname">numSamples</td><td>The number of samples per channel requested.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>The resulting buffer.</dd></dl>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="class_audio_buffer_pool.html#aedbd43cea9d2a42cb212467eda701a01" title="Releases a previously requested buffer back into the pool.">releaseBuffer</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aedbd43cea9d2a42cb212467eda701a01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="class_audio_buffer_pool.html#aedbd43cea9d2a42cb212467eda701a01">AudioBufferPool::releaseBuffer</a> </td>
          <td>(</td>
          <td class="paramtype">Buffer *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Releases a previously requested buffer back into the pool. </p>
<dl class="section see"><dt>See also:</dt><dd>requestBuffer </dd></dl>

</div>
</div>
<a class="anchor" id="aab3f3fe00359088672682a492eddd37e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Buffer* <a class="el" href="class_audio_buffer_pool.html#aab3f3fe00359088672682a492eddd37e">AudioBufferPool::acquireBufferInternal</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numChannels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numSamples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ade6245a8135f5fe419e705231b6cb827"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_audio_buffer_pool.html#ade6245a8135f5fe419e705231b6cb827">AudioBufferPool::releaseBufferInternal</a> </td>
          <td>(</td>
          <td class="paramtype">Buffer *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>vf_AudioBufferPool.h</li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 9 2012 01:39:29 for VFLib by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
